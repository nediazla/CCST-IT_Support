# **Módulo 3: Problemas de conectividad y acceso a recursos**

## 1. Acceso a recursos basados en la red

Los usuarios dependen de la conectividad para acceder a archivos, aplicaciones, impresoras y servicios empresariales.  
El técnico de soporte debe conocer los **conceptos de red, autenticación y recursos compartidos** más comunes.

---

### 1.1 Servicios de directorio comunes

Los **servicios de directorio** centralizan la administración de usuarios, equipos y permisos dentro de una red.

| Servicio | Descripción | Plataforma |
|-----------|--------------|-------------|
| **Active Directory (AD)** | Base de datos de objetos (usuarios, equipos, grupos) utilizada en entornos Windows. Permite autenticación, políticas y control centralizado. | On-premises (servidor local). |
| **Entra ID (Azure Active Directory)** | Versión en la nube de AD, usada para Microsoft 365, Teams, OneDrive, etc. | Nube (Microsoft Azure). |
| **AWS IAM** | Controla usuarios y permisos en servicios de Amazon Web Services. | Nube (Amazon). |

**Funciones principales:**
- Autenticación (inicio de sesión).
- Autorización (qué puede hacer el usuario).
- Administración centralizada de contraseñas y grupos.

---

### 1.2 Autenticación multifactor (MFA)

La **MFA (Multi-Factor Authentication)** agrega una capa de seguridad adicional combinando:
1. Algo que sabes (contraseña).  
2. Algo que tienes (token, aplicación, SMS).  
3. Algo que eres (huella, rostro).

**Ejemplos de aplicaciones MFA:**
- Microsoft Authenticator.  
- Google Authenticator.  
- Cisco Duo.  
- Authy.

**Práctica recomendada:**  
Configurar MFA en todas las cuentas con privilegios administrativos o acceso remoto.

---

### 1.3 Mapeo de unidades compartidas

Permite a los usuarios acceder a carpetas de red o recursos de nube como si fueran discos locales.

**Protocolos y ubicaciones:**

| Tipo | Protocolo | Ejemplo |
|------|------------|----------|
| Carpeta local | SMB/CIFS | `\\servidor\departamento` |
| Nube (OneDrive, Google Drive) | HTTPS | Integrado mediante aplicación cliente |
| Amazon S3 | S3 API | `s3://nombre-bucket` |

**Comandos útiles (Windows):**
```cmd
net use Z: \\servidor\carpeta /user:dominio\usuario
gpupdate /force
```

**macOS:**
```bash
sudo mount_smbfs //usuario@servidor/carpeta /Volumes/red
```

---

### 1.4 Actualización de políticas de grupo

Las **Group Policy (GPO)** controlan configuraciones de usuarios y equipos en dominios AD.

**Comandos:**
```cmd
gpupdate /force
```
Actualiza las políticas de grupo inmediatamente.

**macOS / Linux:**  
Usan perfiles de configuración o scripts para aplicar políticas equivalentes.

---

### 1.5 Restablecimiento de contraseñas

El técnico puede ayudar al usuario a restablecer su contraseña mediante:
- Consola de Active Directory Users and Computers (ADUC).  
- Portal web (Office 365 / Entra ID).  
- Scripts PowerShell:
```powershell
Set-ADAccountPassword -Identity "usuario" -Reset -NewPassword (ConvertTo-SecureString -AsPlainText "NuevaClave123" -Force)
```

**Buenas prácticas:**
- No revelar contraseñas temporales en texto plano por correo.  
- Solicitar cambio obligatorio al siguiente inicio de sesión.

---

### 1.6 Verificación de grupos y permisos

**En Windows:**
- `whoami /groups` → Muestra pertenencia a grupos.  
- Propiedades de archivo/carpeta → pestaña *Seguridad*.  
- `icacls carpeta` → Permisos detallados.

**En Linux/macOS:**
```bash
groups usuario
id usuario
```

**Tipos de permisos comunes:**
- **Lectura (R)**  
- **Escritura (W)**  
- **Ejecución (X)**  

---

## 2. Solución de problemas con periféricos de red

Los dispositivos externos como **impresoras, escáneres, auriculares, cámaras** o **dispositivos de videoconferencia** pueden fallar por configuración o conectividad.

---

### 2.1 Impresoras

**Problemas comunes:**
- No responde o no imprime.  
- Atasco de papel.  
- Tóner o tinta vacíos.  
- Cola de impresión bloqueada.  
- Error de conexión de red.

**Soluciones típicas (Windows):**
```cmd
net stop spooler
del %systemroot%\System32\spool\PRINTERS\* /Q
net start spooler
```

**Pasos:**
1. Comprobar que esté encendida y conectada.  
2. Verificar en *Dispositivos e impresoras*.  
3. Eliminar trabajos en cola.  
4. Reinstalar o actualizar el controlador.

**macOS:**
- Preferencias del sistema → Impresoras y escáneres → “Restablecer sistema de impresión”.

---

### 2.2 Otros periféricos

| Dispositivo | Verificación |
|--------------|--------------|
| **Fax** | Comprobar línea telefónica. |
| **Auriculares / micrófono** | Configurar dispositivo predeterminado. |
| **Unidades externas (USB)** | Revisar formato (FAT32, NTFS, exFAT). |
| **Escáner / cámaras web** | Verificar controlador. |
| **Dispositivos de entrada táctiles** | Recalibrar o reinstalar controlador. |
| **Equipos de teleconferencia (Webex Desk Pro)** | Revisar conexión a la red, actualizar firmware. |

---

## 3. Conectividad del dispositivo final

### 3.1 Tipos de acceso

| Tipo | Descripción |
|------|--------------|
| **LAN (Local Area Network)** | Conexión cableada (Ethernet). Estable, baja latencia. |
| **WLAN (Wireless LAN)** | Conexión Wi-Fi. Flexible, más sensible a interferencias. |

**Verificación:**
```cmd
ping 8.8.8.8
ipconfig /all
```

---

### 3.2 DNS y DHCP

| Servicio | Función |
|-----------|----------|
| **DNS (Domain Name System)** | Traduce nombres de dominio a direcciones IP. |
| **DHCP (Dynamic Host Configuration Protocol)** | Asigna IPs automáticamente a los dispositivos. |

**Problemas comunes:**
- IP autoasignada (`169.254.x.x`) → fallo de DHCP.  
- DNS incorrecto → no resuelve nombres (ej. no abre sitios web).

**Comandos:**
```cmd
ipconfig /release
ipconfig /renew
ipconfig /flushdns
```

**Linux/macOS:**
```bash
sudo dhclient -r
sudo dhclient
sudo systemd-resolve --flush-caches
```

---

### 3.3 DHCPv6 y direcciones de enlace local

- En IPv6, las direcciones **link-local** (fe80::/10) permiten comunicación local sin servidor DHCP.  
- DHCPv6 puede asignar direcciones globales automáticamente.  

**Verificación:**
```bash
ip -6 addr show
```

---

### 3.4 Rangos de direcciones IP

| Tipo | Rango | Uso |
|------|--------|------|
| **Privadas IPv4** | 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 | Redes internas |
| **Públicas IPv4** | Cualquier otra dirección no reservada | Internet |
| **Link-local (APIPA)** | 169.254.0.0/16 | Falla DHCP |
| **Privadas IPv6** | fc00::/7 | Redes internas |
| **Link-local IPv6** | fe80::/10 | Comunicación local |

---

### 3.5 Puerta de enlace y SSID

- **Puerta de enlace predeterminada:** IP del router que conecta a Internet.  
- **SSID (Service Set Identifier):** nombre de la red Wi-Fi.  

**Ejemplo de diagnóstico (Windows):**
```cmd
tracert google.com
netsh wlan show interfaces
```

**Linux:**
```bash
traceroute google.com
iwconfig
```

---

### 3.6 Comandos de diagnóstico

| Comando | Uso |
|----------|-----|
| `ping` | Prueba conectividad básica. |
| `tracert` / `traceroute` | Muestra ruta hacia un destino. |
| `ipconfig` / `ifconfig` | Muestra configuración de red. |
| `nslookup` | Prueba resolución DNS. |
| `netstat` | Muestra conexiones activas. |

**Ejemplo práctico:**
```cmd
ping 8.8.8.8
tracert www.cisco.com
nslookup www.cisco.com
netstat -an
```

---

### 3.7 Firewalls y conectividad

Un **firewall** controla el tráfico entrante y saliente según reglas.  
Si un servicio no responde, puede estar **bloqueado por firewall**.

**Comprobación (Windows):**
```cmd
netsh advfirewall show allprofiles
```

**Desactivar temporalmente para prueba:**
```cmd
netsh advfirewall set allprofiles state off
```
*(solo con fines de diagnóstico; volver a activarlo después).*

---

## 4. Ejemplo práctico completo

**Situación:**  
El usuario no puede acceder a la carpeta compartida de su departamento.

**Diagnóstico:**
1. Verificar conectividad de red (`ping servidor`).  
2. Comprobar pertenencia al dominio (`systeminfo | find "Domain"`).  
3. Revisar permisos en la carpeta.  
4. Mapear unidad nuevamente:
```cmd
net use Z: \\servidor\departamento /user:dominio\usuario
```
5. Actualizar políticas:
```cmd
gpupdate /force
```

**Resultado:** Acceso restaurado.  
**Documentación:** Ticket cerrado con detalle del problema y pasos de resolución.

---

## 5. Preguntas tipo examen

1. ¿Cuál de los siguientes servicios administra usuarios y equipos en un dominio Windows?  
   A. DNS  
   B. Active Directory  
   C. DHCP  
   D. SMB  
   **Respuesta:** B  

2. Si un usuario tiene dirección IP 169.254.x.x, ¿qué indica esto?  
   A. Fallo del DNS  
   B. Fallo del servidor DHCP  
   C. Firewall activo  
   D. Conflicto de IP  
   **Respuesta:** B  

3. ¿Qué comando actualiza las políticas de grupo en Windows?  
   A. gpupdate /force  
   B. net use  
   C. netstat -r  
   D. ping localhost  
   **Respuesta:** A  

4. ¿Qué comando permite verificar la ruta hasta un destino?  
   A. ipconfig  
   B. tracert  
   C. nslookup  
   D. netstat  
   **Respuesta:** B  

5. ¿Qué protocolo se utiliza para compartir carpetas de red en Windows?  
   A. DHCP  
   B. SMB/CIFS  
   C. FTP  
   D. HTTP  
   **Respuesta:** B  

6. Si un usuario no puede imprimir y el trabajo está atascado en la cola, ¿qué debe hacer el técnico?  
   A. Reiniciar el servicio de spooler.  
   B. Formatear el equipo.  
   C. Reinstalar todo el sistema operativo.  
   D. Cambiar el router.  
   **Respuesta:** A  

7. ¿Cuál es la función de un firewall?  
   A. Asignar direcciones IP.  
   B. Filtrar tráfico de red según reglas.  
   C. Resolver nombres de dominio.  
   D. Aumentar la velocidad de la conexión.  
   **Respuesta:** B  
